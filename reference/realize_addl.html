<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="When doses are scheduled with ii and addl, the object is expanded to
include one record for every dose. In the result, no record with have
ii or addl set to non-zero value."><title>Make addl doses explicit in an event object or data set — realize_addl • mrgsolve</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make addl doses explicit in an event object or data set — realize_addl"><meta property="og:description" content="When doses are scheduled with ii and addl, the object is expanded to
include one record for every dose. In the result, no record with have
ii or addl set to non-zero value."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mrgsolve</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/mrgsolve.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/extra/dollar-pred.html">Models without compartments</a>
    <a class="dropdown-item" href="../articles/extra/events.html">Event objects</a>
    <a class="dropdown-item" href="../articles/extra/init.html">Set initial conditions</a>
    <a class="dropdown-item" href="../articles/extra/modeled-event-time.html">Modeled events</a>
    <a class="dropdown-item" href="../articles/extra/steady-state.html">Steady-state</a>
    <a class="dropdown-item" href="../articles/extra/time-after-dose.html">Time after dose</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/metrumresearchgroup/mrgsolve/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Make addl doses explicit in an event object or data set</h1>
      <small class="dont-index">Source: <a href="https://github.com/metrumresearchgroup/mrgsolve/blob/HEAD/R/realize_addl.R" class="external-link"><code>R/realize_addl.R</code></a></small>
      <div class="d-none name"><code>realize_addl.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>When doses are scheduled with <code>ii</code> and <code>addl</code>, the object is expanded to
include one record for every dose. In the result, no record with have
<code>ii</code> or <code>addl</code> set to non-zero value.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">realize_addl</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu">realize_addl</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  warn <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mark_new <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"inherit"</span>, <span class="st">"na"</span>, <span class="st">"locf"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for ev</span></span>
<span><span class="fu">realize_addl</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>a <code>data_set</code> data frame or an event object (see details)</p></dd>


<dt>...</dt>
<dd><p>not used</p></dd>


<dt>warn</dt>
<dd><p>if <code>TRUE</code> a warning is issued if no <code>ADDL</code> or
<code>addl</code> column is found</p></dd>


<dt>mark_new</dt>
<dd><p>if <code>TRUE</code>, a flag is added to indicate new columns</p></dd>


<dt>fill</dt>
<dd><p>specifies how to handle non-dose related data columns
in new data set records; this option is critical when handling
data sets with time-varying, non-dose-related data items; see details</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>data_set</code> data.frame or event object, consistent with the type of <code>x</code>.
The <code>ii</code> and <code>addl</code> columns will all be set to zero. The result is always
ungrouped.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If no <code>addl</code> column is found the data frame is returned and
a warning is issued if <code>warn</code> is true. If <code>ii</code>,
<code>time</code>, or <code>evid</code> are missing, an error is generated.</p>
<p>If a grouped data.frame (via <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code>) is passed, it will be
ungrouped.</p>
<p>Use caution when passing in data that has non-dose-related data
columns that vary within a subject and pay special attention
to the <code>fill</code> argument. By definition, <code>realize_addl</code>
will add new rows to your data frame and it is not obvious
how the non-dose-related data should be handled in these new
rows.  When <code>inherit</code> is chosen, the new records have
non-dose-related data that is identical to the originating
dose record. This should be fine when these data items are not
varying with time, but will present a problem when the data
are varying with time.  When <code>locf</code> is chosen,
the missing data are filled in with <code>NA</code> and an
last observation carry forward operation is applied to
<strong>every</strong> column in the data set.  This may not be what
you want if you already had missing values in the input
data set and want to preserve that missingness. When <code>na</code>
is chosen, the missing data are filled in with <code>NA</code> and
no <code>locf</code> operation is applied.  But note that these
missing values may be problematic for a mrgsolve simulation
run. If you have any time-varying columns or missing data
in your data set, be sure to check that the output from
this function is what you were expecting.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="ev.html">ev</a></span><span class="op">(</span>amt <span class="op">=</span> <span class="fl">100</span>, ii <span class="op">=</span> <span class="fl">12</span>, addl <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">realize_addl</span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Events:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   time amt ii addl cmt evid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0 100  0    0   1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   12 100  0    0   1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   24 100  0    0   1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   36 100  0    0   1    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="ev.html">ev</a></span><span class="op">(</span>amt <span class="op">=</span> <span class="fl">100</span>, ii <span class="op">=</span> <span class="fl">12</span>, addl <span class="op">=</span> <span class="fl">2</span>, WT <span class="op">=</span> <span class="fl">69</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="ev.html">ev</a></span><span class="op">(</span>amt <span class="op">=</span> <span class="fl">200</span>, ii <span class="op">=</span> <span class="fl">24</span>, addl <span class="op">=</span> <span class="fl">2</span>, WT <span class="op">=</span> <span class="fl">70</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="ev.html">ev</a></span><span class="op">(</span>amt <span class="op">=</span>  <span class="fl">50</span>, ii <span class="op">=</span>  <span class="fl">6</span>, addl <span class="op">=</span> <span class="fl">2</span>, WT <span class="op">=</span> <span class="fl">71</span><span class="op">)</span> </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="ev_seq.html">ev_seq</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,<span class="va">c</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">realize_addl</span><span class="op">(</span><span class="va">e</span>, mark_new <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Events:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   time amt ii addl cmt evid WT .addl_row_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0 100  0    0   1    1 69          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   12 100  0    0   1    1 69          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   24 100  0    0   1    1 69          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   36 200  0    0   1    1 70          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   60 200  0    0   1    1 70          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   84 200  0    0   1    1 70          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  108  50  0    0   1    1 71          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  114  50  0    0   1    1 71          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  120  50  0    0   1    1 71          1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kyle T Baron.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

